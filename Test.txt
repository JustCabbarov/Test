using System;
using System.Threading.Tasks;

public class Program
{
    static int counter = 0; // Shared state (problem!)

    public static async Task Main()
    {
        var tasks = new Task[1000];

        for (int i = 0; i < 1000; i++)
        {
            tasks[i] = Task.Run(() =>
            {
                for (int j = 0; j < 1000; j++)
                {
                    counter++; // ❗ Race condition: çox riskli
                }
            });
        }

        await Task.WhenAll(tasks);

        Console.WriteLine($"Expected: 1,000,000 — Actual: {counter}");
    }
}
